<style>
  .stepper-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    flex: 1;
  }

  .stepper-item::before {
    content: "";
    position: absolute;
    border-bottom: 2px solid #ccc;
    width: 100%;
    top: 20px;
    left: -50%;
    z-index: 2;
  }

  .stepper-item::after {
    content: "";
    position: absolute;
    border-bottom: 2px solid #ccc;
    width: 100%;
    top: 20px;
    left: 50%;
    z-index: 2;
  }

  .stepper-item .step-icon {
    position: relative;
    z-index: 5;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #ccc;
    margin-bottom: 6px;
    cursor: pointer;
  }

  .stepper-item .step-title {
    color: white;
  }

  .stepper-item.active .step-icon {
    background-color: #ff5c01;
    color: white;
  }

  .stepper-item.completed .step-icon {
    background-color: #6c88ff;
    color: white;
  }

  .stepper-item.active::before {
    border-color: #6c88ff;
  }

  .stepper-item.completed::after,
  .stepper-item.completed::before {
    border-color: #6c88ff;
  }

  .stepper-item:first-child::before,
  .stepper-item:last-child::after {
    content: none;
  }

  select {
    cursor: pointer;
  }
</style>

<div class="card min-vh-100 d-flex py-5 px-2">
  <div
    class="card-header d-flex flex-row align-items-center justify-content-end gap-4"
  >
    <p class="fw-bold mb-0 uppercase text-capitalize">
      Welcome, {{profile.username}}
    </p>
    <buton class="btn btn-outline-danger" ng-click="logout()">
      <span class="fa fa-sign-out me-2"></span>Logout</buton
    >
  </div>
  <!--Stepper header-->
  <div
    class="d-flex justify-content-between position-relative p-4 rounded-3"
    style="background-color: #03045e"
  >
    <div
      class="stepper-item"
      ng-repeat="step in steps"
      ng-class="{'active': currentStep === $index, 'completed': currentStep > $index}"
    >
      <div
        class="step-icon"
        ng-click="goToStep($index)"
        ng-class="step.icon"
      ></div>
      <div class="step-title">{{step.title}}</div>
    </div>
  </div>
  <!-- card-body-->
  <div class="card-body shadow pb-0">
    <!--Steps start here-->
    <div ng-switch="currentStep" class="py-4">
      <!-- First step modal-->
      <div ng-switch-when="0">
        <p class="text-primary h5 fw-bold">Employment Information</p>
        <p class="text-secondary pb-2">
          Fill in your employment preferences and location to improve job
          matches
        </p>
        <div class="row">
          <!-- 1st column-->
          <div class="col">
            <label
              for="desired_position"
              class="fw-semibold text-dark opacity-75 py-2"
              >Desired Position</label
            >
            <input
              type="text"
              class="form-control rounded-3"
              placeholder="Enter Desired Position"
            />
            <label for="employment_type" class="fw-semibold text-secondary py-2"
              >Employment Type</label
            >
            <select class="form-control">
              <option disabled selected>--SELECT EMPLOYMENT--</option>
              <option value="permanent">Permanent</option>
              <option value="contratual">Contractual</option>
              <option value="on-the-job-training">On-the-Job Training</option>
              <option value="internship">Internship</option>
            </select>

            <label for="engagement_term" class="fw-semibold text-secondary py-2"
              >Engagement Term (months)</label
            >
            <input
              type="number"
              class="form-control rounded-3"
              placeholder="e.g 5"
            />
            <label for="employer_status" class="fw-semibold text-secondary py-2"
              >Employment Status</label
            >
            <select name="" id="" class="form-control">
              <option value="" disabled selected>
                --SELECT EMPLOYMENT STATUS--
              </option>
              <option value="part_time">Part-time</option>
              <option value="full_time">Full-time</option>
            </select>
            <label for="work_schedule" class="fw-semibold text-secondary py-2"
              >Work Schedule</label
            >
            <select name="" id="" class="form-control">
              <option value="" disabled selected>
                -- SELECT WORK SCHEDULE --
              </option>
              <option value="day_shift">Day Shift</option>
              <option value="night_shift">Nigth Shift</option>
              <option value="hybrid">Hybrid</option>
            </select>

            <label for="employer_type" class="fw-semibold text-secondary py-2"
              >Employer Type</label
            >
            <select name="" id="" class="form-control">
              <option value="" disabled selected>
                --SELECT EMPLOYER TYPE--
              </option>
              <option value="private">Private</option>
              <option value="corporate">Corporate</option>
              <option value="organizational">Organizational</option>
            </select>

            <label for="expected_salary" class="fw-semibold text-secondary py-2"
              >Expected Salary</label
            >
            <input
              type="number"
              class="form-control rounded-3"
              placeholder="e.g 30000"
            />
          </div>
          <!-- 1st step 2nd column-->
          <div class="col">
            <p class="text-secondary pb-2 fw-bold">Preferred Location</p>
            <label for="country" class="fw-semibold text-secondary py-2"
              >Country</label
            >
            <select name="" id="" class="form-control">
              <option value="ph">Philippines</option>
            </select>
            <label for="province" class="fw-semibold text-secondary py-2"
              >Province</label
            >
            <select name="" id="" class="form-control">
              <option value="cavite">Cavite</option>
            </select>
            <label for="municipality" class="fw-semibold text-secondary py-2"
              >Municipality</label
            >
            <select name="" id="" class="form-control">
              <option value="tanza">Tanza</option>
            </select>
          </div>
        </div>
      </div>
      <!-- 2nd step modal-->
      <div ng-switch-when="1">
        <p class="text-primary h5 fw-bold my-4">Personal Information</p>
        <div class="row gap-2">
          <!-- 2nd step fist column-->
          <div class="col">
            <label for="firstname" class="fw-semibold text-secondary py-2"
              >Firstname</label
            >
            <input type="text" class="form-control rounded-3" />
            <label for="lastname" class="fw-semibold text-secondary py-2"
              >Lastname</label
            >
            <input type="text" class="form-control rounded-3" />
            <label for="age" class="fw-semibold text-secondary py-2">Age</label>
            <input type="text" class="form-control rounded-3" />
            <label for="gender" class="fw-semibold text-secondary py-2"
              >Gender</label
            >
            <select name="" id="" class="form-control">
              <option value="" disabled>--SELECT GENDER--</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>

            <label for="phone_numbers" class="fw-semibold text-secondary py-2">
              Mobile Phone Number</label
            >
            <input type="number" class="form-control" />
          </div>
          <!-- 2nd step 2nd column-->
          <div class="col">
            <p class="fw-bold h6">Address Information</p>
            <label for="address1" class="fw-semibold text-secondary py-2"
              >Address 1</label
            >
            <input type="text" class="form-control rounded-3" />
            <label for="address2" class="fw-semibold text-secondary py-2"
              >Address 2 (optional)</label
            >
            <input type="text" class="form-control rounded-3" />
            <label for="country" class="fw-semibold text-secondary py-2"
              >Country</label
            >
            <select name="" id="" class="form-control">
              <option value="ph">Philippines</option>
            </select>
            <label for="province" class="fw-semibold text-secondary py-2"
              >Province</label
            >
            <select name="" id="" class="form-control">
              <option value="cavite">Cavite</option>
            </select>
            <label for="municipality" class="fw-semibold text-secondary py-2"
              >Municipality</label
            >
            <select name="" id="" class="form-control">
              <option value="tanza">Tanza</option>
            </select>

            <label for="zip_code" class="fw-semibold text-secondary py-2"
              >ZIP Code</label
            >
            <input type="number" class="form-control rounded-3" />
          </div>
          <!-- 2nd step 3rd column-->
          <div class="col">
            <p class="fw-bold">Other relevant Info</p>
            <div class="d-flex flex-column justify-content-center gap-2">
              <label for=""
                ><input type="checkbox" /> Available Immediately</label
              >
              <label for=""><input type="checkbox" /> Are you an OFW?</label>
              <label for=""
                ><input type="checkbox" /> Do you have a driver's
                licence?</label
              >
            </div>
          </div>
        </div>
      </div>
      <!-- Step 3 modal-->
      <div ng-switch-when="2">
        <div class="row">
          <!-- 3rd step first columm-->
          <div class="col">
            <p class="text-primary h5 fw-bold my-4">Educational Background</p>
            <p class="text-secondary pb-2">
              Provide your most recent or highest level of education.
            </p>
            <label for="educationalBg" class="fw-bold" style="cursor: pointer"
              ><input
                type="checkbox"
                id="educationalBg"
                ng-model="educationalBg"
                class="me-3"
              />I have an educational background</label
            >

            <div class="p-2" ng-show="educationalBg">
              <label for="" class="fw-bold text-dark opacity-75">
                Highest Educational Attainment
              </label>
              <select
                name=""
                id=""
                ng-model="selectedEducation"
                class="form-control form-control-md my-2"
              >
                <option value="" disabled selected>--Select Education--</option>
                <option ng-repeat="i in educationalList" value="{{i.title}}">
                  {{i.title}}
                </option>
              </select>
            </div>

            <label
              for="isGraduated"
              class="fw-bold text-dark opacity-75 m-0"
              style="cursor: pointer"
              ng-show="selectedEducation && educationalBg"
              ><input
                type="checkbox"
                id="isGraduated"
                ng-model="isGraduated"
                class="me-3"
              />I have graduated
            </label>

            <!-- This section shows if anything is selected-->
            <div ng-show="selectedEducation && educationalBg" class="p-2">
              <!--Only show input if selected has a label-->
              <div ng-if="hasExtraLabel(selectedEducation)">
                <p for="" class="my-2 fw-bold text-dark opacity-75">
                  {{getEducationLabel(selectedEducation).label}}
                </p>
                <input
                  type="text"
                  class="form-control"
                  placeholder="{{getEducationLabel(selectedEducation).placeholder}}"
                />
              </div>
              <!-- always show shool name input-->
              <p for="" class="my-2 fw-bold text-dark opacity-75">
                School Name
              </p>
              <input
                type="text"
                class="form-control"
                placeholder="e.g., University of the Philippines"
              />
              <div class="row py-2">
                <div class="col">
                  <p class="my-2 fw-bold text-dark opacity-75">Yeary Started</p>
                  <input
                    type="text"
                    class="form-control"
                    minlength="4"
                    maxlength="4"
                    placeholder="e.g., 2019"
                  />
                </div>
                <div class="col">
                  <div ng-show="isGraduated">
                    <p class="my-2 fw-bold text-dark opacity-75">
                      Year Graduated
                    </p>
                    <input
                      type="text"
                      class="form-control"
                      minlength="4"
                      maxlength="4"
                      placeholder="e.g., 2025"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 3rd step 2nd col-->
          <div class="col">
            <p class="text-primary h5 fw-bold my-4">Work Experience</p>
            <p class="text-secondary pb-2">
              Tell us about your previous job experience (if any).
            </p>
            <label
              for="hasPastWork"
              class="fw-bold my-4"
              style="cursor: pointer"
              ><input
                type="checkbox"
                id="hasPastWork"
                ng-model="hasPastWork"
                class="me-3"
              />I have past work experience</label
            >
            <!-- Show when hasPastwork is true-->
            <div class="border p-3 bg-light" ng-show="hasPastWork">
              <div class="bg-white p-4 border d-flex flex-column gap-2 mb-2" ng-repeat="exp in experiences track by $index"> 
                
                <!-- Remove button/ show only on new item-->
                <button class="btn btn-primary fa fa-close ms-auto"
                ng-if="$index > 0"
                ng-click="removeItem('experiences',$index)"
                ></button>

                <label class="text-dark text-secondary fw-semibold">Job Title/Position</label>
                <input type="text" class="form-control" ng-model="exp.jobTitle" />
              
                <label class="text-dark text-secondary fw-semibold">Company Name</label>
                <input type="text" class="form-control" ng-model="exp.companyName" />
              
                <label class="text-secondary fw-bold py-2" style="cursor: pointer">
                  <input type="checkbox" ng-model="exp.isEmployed" />
                  I am currently employed in this role
                </label>
              
                <div class="row">
                  <div class="col">
                    <label class="fw-bold text-secondary py-2">Start Month & Year</label>
                    <input type="date" class="form-control" ng-model="exp.startDate" />
                  </div>
                  <div class="col">
                    <div ng-show="!exp.isEmployed">
                      <label class="fw-bold text-secondary py-2">End Month & Year</label>
                      <input type="date" class="form-control" ng-model="exp.endDate" />
                    </div>
                  </div>
                </div>
              
                <label class="text-secondary fw-bold py-2">
                  Skills Acquired (up to 5)
                  <input type="text" class="form-control mt-2" ng-model="exp.skills" />
                </label>
              
                <label class="text-secondary fw-bold pb-2">
                  Company Contact Number (optional)
                  <input type="text" class="form-control mt-2" ng-model="exp.contactNumber" />
                </label>
              </div>

              <div class="d-flex flex-column">
                <button class="btn btn-primary my-2 ms-auto" ng-click="addExperience()"
                ng-disabled="experiences.length >= 3">
                  <span class="fa fa-plus-circle"></span>
                  Add another experience
                </button>

                <p class="p-2 text-danger fa fa-warning ms-auto"
                ng-show="experiences.length >=3"
                > You’ve reached the maximum of 3 entries.</p>
              </div>

            </div>
          </div>
        </div>
      </div>
      <!-- Step 4-->
      <div ng-switch-when="3">
        <div class="row">
          <p class="text-primary h5 fw-bold my-4">
            Show Off Your Competencies
          </p>
          <!-- 4th step first columm-->
          <div class="col">
            <p class="text-primary fw-bold fs-6 pb-2">Other Skills</p>
            <label for="otherSkills" class="fw-bold" style="cursor: pointer;"
              ><input type="checkbox" id="otherSkills" ng-model="otherSkills" class="me-3" />Do you have other
              skills?</label
            >

            <div class="d-flex flex-column gap-2 mt-2" ng-show="otherSkills">
              <label class="text-dark text-secondary fw-semibold">Select Skills (up to 5)</label>
              <input type="text" class="form-control"/>
            </div>

          </div>
          <!--4th step 2nd column-->
          <div class="col">
            <p class="text-primary fw-bold fs-6 pb-2">Language Proficiency</p>
            <!-- section for the language-->
            <div class="py-2" ng-repeat="lang in languageProficiency track by $index">
              <div class="d-flex flex-row align-items-center justify-content-between py-2">
                <p class="text-primary fw-bold fs-6 m-0">{{$index === 0 ? "Primary Language" : "Additional Language "+ ($index + 1)}}</p>
                <button class="btn btn-danger fs-5 fa fa-trash"
                ng-show="$index > 0"
                ng-click="removeItem('languageProficiency', $index)"
                ></button>
              </div>
              <select name="" id="" class="form-control my-2" ng-model="lang.language">
                <option value="" disabled selected>--SELECT LANGUAGE--</option>
                <option value="english">English</option>
                <option value="filipino">Filipino</option>
                <option value="japanese">Japanese</option>
                <option value="chinese">Chinese</option>
              </select>
              <p class="text-secondary fw-bold py-2 m-0">Verbal Proficiency</p>
              <div class="gap-2 d-flex">
                <div ng-repeat="star in [].constructor(10) track by $index">
                  <div
                    class="fa fa-star fs-5"
                    ng-click="handleRate('verbalRate',$parent.$index, $index)"
                    ng-class="{'text-warning': $index < lang.verbalRate, 'text-secondary': $index >= lang.verbalRate}"
                  ></div>
                </div>
                <p class="ms-3 fw-bold">{{lang.verbalPercentage || '0%'}}</p>
              </div>
              <p class="text-secondary fw-bold py-2 m-0">Written Proficieny</p>
              <div class="gap-2 d-flex border-bottom">
                <div ng-repeat="star in [].constructor(10) track by $index">
                  <div
                    class="fa fa-star fs-5"
                    ng-class="{'text-warning' : $index < lang.writtenRate, 'text-secondary' : $index >= lang.writtenRate}"
                    ng-click="handleRate('writtenRate',$parent.$index, $index)"
                  ></div>
                </div>
                <p class="ms-3 fw-bold">{{lang.writtenPercentage || '0%'}}</p>
              </div>
            </div>

           <button class="d-flex flex-row align-items-center gap-2 btn btn-primary py-2 px-4 rounded-4 ms-auto mt-4"
           ng-click="addNewLang()"
           ng-show="languageProficiency.length < 3"
           >
            <span class="fa fa-plus-circle"></span>
            <p class="m-0 fw-bold">Add More</p>
           </button>
          </div>

          <!--4th step 3rd column-->
          <div class="col">
            <p class="text-primary fw-bold fs-6 pb-2">Personal Traits</p>
            
            <div class="d-flex flex-column gap-2 mt-2">
              <label class="text-dark text-secondary fw-semibold">Select up to 3 traits that best describe you:</label>
              <input type="text" class="form-control" />
            </div>
          </div>
        </div>
      </div>
      <!-- Step 5-->
      <div ng-switch-when="4">
        <div
          class="d-flex flex-column align-items-center justify-content-center"
        >
          <p class="text-center text-success fw-bold fs-4">You're Ready</p>
          <p
            class="d-flex flex-column align-items-center justify-content-center gap-2 fs-6"
          >
            <span class="text-center">
              Now that everything is setup, you should be ready to explore a
              massive range of opportunities awaiting at your fingertips!
            </span>
            <span class="text-center">
              You can still change your information on your <b>Profile</b> after
              registration.
            </span>
            <strong class="text-center"
              >Click "Finish Registration" to begin your journey!</strong
            >
            <strong class="text-secondary p-2">
              How would you like to be on the Map?
            </strong>
          </p>
          <label for="" class="pb-4">
            <input type="checkbox" ng-model="isVisible" />
            {{isVisible ? "Visible" : "Hidden"}}
          </label>

          <div class="d-flex flex-row gap-2">
            <button class="btn btn-primary text-white fw-bold opacity-75">
              Finish and Proceed to Payment
            </button>
            <button
              class="btn btn-primary text-white fw-bold opacity-75"
              ng-click="prevStep()"
            >
              Take me back
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Next/Prev Buttons-->
    <div
      class="d-flex align-items-center justify-content-between border-top py-3"
      ng-show="currentStep !== steps.length -1"
    >
      <button
        ng-click="prevStep()"
        ng-show="currentStep > 0"
        class="btn btn-primary rounded-3 fw-semibold px-4 me-auto mt-4"
      >
        ← Prev</button
      ><button
        ng-click="nextStep()"
        ng-disable="currentStep === steps.length - 1"
        class="btn btn-primary rounded-3 fw-semibold px-4 ms-auto mt-4"
      >
        Next →
      </button>
    </div>
  </div>
</div>
